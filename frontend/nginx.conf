user nginx;
worker_processes auto;
error_log   /var/log/nginx/error.log warn;
pid         /var/run/nginx.pid;
events {
    worker_connections  1024;
}
# This configuration will be changed to redirect to HTTPS later
http {
    include                 /etc/nginx/mime.types;
    default_type            application/octet-stream;
    client_max_body_size    500M;
    sendfile                on;
    keepalive_timeout       65;
    gzip                    on;
    gzip_http_version       1.1;
    log_format              main '$remote_addr - $remote_user [$time_local] "$request" '
                                    '$status $body_bytes_sent "$http_referer" '
                                    '"$http_user_agent" "$http_x_forwarded_for"';
    access_log              /var/log/nginx/access.log main;

    server {
        # if no Host match, close the connection to prevent host spoofing
        listen  80 default_server;
        return  444;
    }
    server {
        server_name         localhost;
        listen              5000;
        location ^~ / {
            root                    /app;
            index                   /static/dist/index.html;
            proxy_set_header        Host $host;
        }

        location /results/ {
            alias                   /app/results/;
        }
    }
}